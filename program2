MySQL-CREATE- FK

FOREIGN key

ÔÇ¥ A Foreign Key is a column or group of columns
ÔÇ¥ It links two tables
ÔÇ¥ It refers to the Primary Key of another table
ÔÇ¥ Used to maintain data integrity

Why Foreign Key is Needed?

ÔÇ¥ To maintain relationship between tables
ÔÇ¥ To avoid invalid data entry
ÔÇ¥ To ensure referential integrity
ÔÇ¥ To connect related information stored in different tables
ÔÇ¥ Example:
ÔÇ¥ Student ‚Üí Department
ÔÇ¥ Employee ‚Üí Department

Parent Table & Child Table

ÔÇ¥ Parent TableContains Primary Key
ÔÇ¥ Child TableContains Foreign Key

ÔÇ¥ üìå Rule:Foreign Key value must exist in Parent table

Example Tables

ÔÇ¥ Department Table (Parent)

dept_id dept_name
1 CSE
2 MCA

ÔÇ¥ Student Table (Child)

student_id name dept_id
101 Anu 1
102 Ravi 2

Foreign Key Syntax (MySQL)

ÔÇ¥ CREATE TABLE department (
ÔÇ¥ dept_id INT PRIMARY KEY,
ÔÇ¥ dept_name VARCHAR(30)
ÔÇ¥ );

ÔÇ¥ CREATE TABLE student (
ÔÇ¥ student_id INT PRIMARY KEY,
ÔÇ¥ name VARCHAR(50),
ÔÇ¥ dept_id INT,
ÔÇ¥ FOREIGN KEY (dept_id) REFERENCES department(dept_id)
ÔÇ¥ );

How Foreign Key Works

ÔÇ¥ Insert allowed only if dept_id exists
ÔÇ¥ Prevents:
ÔÇ¥ Wrong department numbers
ÔÇ¥ Orphan records
ÔÇ¥ Ensures consistency

ÔÇ¥ Eg: INSERT INTO student VALUES (103, 'Meera', 5);
ÔÇ¥ ‚ùå Error (dept_id 5 not exists)

Difference ‚Äì Primary Key vs Foreign Key

Primary Key Foreign Key

Uniquely identifies record Refers to primary key

Cannot be NULL Can be NULL

One per table Multiple allowed

Ensures uniqueness Ensures relationship

Sample pgms.

ÔÇ¥ Exercise 1: Student ‚Äì Department
1. Create department table with dept_id as PRIMARY KEY
2. Create student table with dept_id as FOREIGN KEY
ÔÇ¥ Exercise 2: Employee ‚Äì Company
1. company(company_id, company_name)
2. employee(emp_id, emp_name, company_id)

Lab Experiment 1:

ÔÇ¥ Create an INVOICE database and having following tables:
ÔÇ¥ CUSTOMER {cust_id, address, city, ph_no}
ÔÇ¥ PRODUCT { p_id, pname, price (default 0}
ÔÇ¥ INVOICE_MASTER { inv_id, cust_id(FK), inv_date}
ÔÇ¥ INVOICE_ITEM { inv_id(FK), p_id (FK), quantity}


MySQL-DML Commands
INSERT
UPDATE
DELETE
SELECT

1.INSERT Command

ÔÇ¥ Used to insert new record in the table
ÔÇ¥ Syntax:
ÔÇ¥ INSERT INTO table_name (column1, column2, column3, ...) VALUES (value1,
value2, value3, ...);
ÔÇ¥ Eg: INSERT INTO student(roll, name, age) VALUES (21,‚ÄôAsha‚Äô, 21);
ÔÇ¥ Syntax:
ÔÇ¥ INSERT INTO table_name VALUES (value1, value2, value3, ...);
ÔÇ¥ Eg: INSERT INTO student VALUES (21, ‚Äòasha‚Äô, 21);

2. SELECT COMMAND

ÔÇ¥ The SELECT statement is used to select data from a database.
ÔÇ¥ Systax:
ÔÇ¥ SELECT column1, column2, ...FROM table_name;
ÔÇ¥ SELECT * FROM table_name;

SELECT WHERE clause

ÔÇ¥ The WHERE clause is used to filter records.
ÔÇ¥ The WHERE clause is used to extract only those records that fulfill a specified
condition.
ÔÇ¥ Syntax:
ÔÇ¥ SELECT column1, column2, ...
FROM table_name
WHERE condition;

AND, OR and NOT Operators

ÔÇ¥ The WHERE clause can be combined with AND, OR, and NOT operators.
ÔÇ¥ The AND and OR operators are used to filter records based on more than
one condition:
ÔÇ¥ The AND operator displays a record if all the conditions separated by AND
are TRUE.
ÔÇ¥ The OR operator displays a record if any of the conditions separated by OR
is TRUE.
ÔÇ¥ The NOT operator displays a record if the condition(s) is NOT TRUE.

ÔÇ¥ AND syntax:
ÔÇ¥ SELECT column1, column2, ...
FROM table_name
WHERE condition1 AND condition2 AND condition3 ...;

ÔÇ¥ OR syntax:
ÔÇ¥ SELECT column1, column2, ...
FROM table_name
WHERE condition1 OR condition2 OR condition3 ...;

ÔÇ¥ NOT syntax:
ÔÇ¥ SELECT column1, column2, ...
FROM table_name
WHERE NOT condition;

3. UPDATE

ÔÇ¥ UPDATE query is a DML statement used to modify the data of the MySQL
table within the database.
ÔÇ¥ The UPDATE statement is used with the SET and WHERE CLAUSE. The SET
clause is used to change the values of the specified column. We can
update single or multiple columns at a time.
ÔÇ¥ Syntax:
UPDATE table_name
SET column_name1 = new-value1,
column_name2=new-value2, ...
[WHERE Clause]

ÔÇ¥ EG:
UPDATE student
SET age=28
WHERE roll=21;
ÔÇ¥ Eg:
UPDATE People
SET name = 'Mary', occupation = 'Content Writer'
WHERE id = 105;

4. DELETE

ÔÇ¥ MySQL DELETE statement is used to delete data from the MySQL table
within the database.
ÔÇ¥ By using delete statement, we can delete records on the basis of
conditions.
ÔÇ¥ Syntax:
DELETE FROM table_name
WHERE
(Condition specified);
ÔÇ¥ Eg:
ÔÇ¥ Eg:
DELETE FROM student WHERE roll=21;

DML -INSERT

ÔÇ¥ 1. Insert values in EMPLOYEE table.
ÔÇ¥ 2. Insert values in STUDENT table.
ÔÇ¥ 3. Insert values in INVOICE database.

Rules

1. CUSTOMER Table
ÔÇ¥ Customer(id, name, address, city, ph_no)
ÔÇ¥ Insert 7 customers
ÔÇ¥ Some customers must not have phone number (ph_no = NULL)
ÔÇ¥ At least 2 customers must live in TVM.
2. PRODUCT Table
ÔÇ¥ Product(pid, pname, price DEFAULT 0)
ÔÇ¥ Insert 7 products
ÔÇ¥ Some product prices must be less than 25

3. INVOICE_MASTER Table
ÔÇ¥ Invoice_master(inv_id, cust_id (FK), inv_date)
ÔÇ¥ All customers must buy at least one product
ÔÇ¥ 2 or 3 customers must buy more than 2 times (multiple invoices)
ÔÇ¥ Invoice date must be between 01-01-2025 and 31-12-2025
4. INVOICE_ITEM Table
ÔÇ¥ Invoice_item(inv_id (FK), pid (FK), quantity)
ÔÇ¥ All invoice_master entries must appear here
ÔÇ¥ Not all products should be sold (leave at least one product unused)
ÔÇ¥ 2 or 3 customers must buy more than 2 products
ÔÇ¥ Quantity should vary:
ÔÇ¥ Some < 2
ÔÇ¥ Some > 2

Sample values: CUSTOMER

id name address city ph_no
1 Anu Rose Villa TVM 9876543210
2 Ravi Green House TVM NULL
3 Meera Blue Nest Kochi 9988776655
4 Arun Lake View Calicut NULL
5 Sita Hill Top Thrissur 9123456789

PRODUCT

pid pname price
101 Pen 10.00
102 Notebook 20.00
103 Mouse 500.00
104 Keyboard 0.00
105 Laptop 55000

INVOICE_MASTER

inv_id cust_id inv_date
1001 1 2025-01-10
1002 1 2025-03-15
1003 2 2025-02-20
1004 3 2025-04-05
1005 3 2025-06-18
1006 4 2025-07-22
1007 5 2025-09-10

INVOICE_ITEM

inv_id pid quantity
1001 101 1
1001 102 3
1002 103 1
1003 101 5
1004 102 2
1004 103 4
1005 104 1
1006 101 2
1007 102 3




MySQL- RECORD PROGRAM 2- DML COMMANDS
RESMI S R
‚Ä¢
Jan 31 (Edited Feb 23)
100 points
2. DML COMMANDS 
 a) DML -INSERT 
 1. Insert values in EMPLOYEE table. 
 2. Insert values in STUDENT table. 
 3. Insert values in INVOICE database. 
 b) DML - UPDATE 
 1. Update the price of a particular product. 
 2. Change the name of city ‚Äòcalicut‚Äô to ‚Äòkozhikode‚Äô in the customer table. 
 3. Update all prices with 2% of its original price. 
 4. Change the address, city, phone number of a particular customer. 
 5. Change the quantity of a purchased product of inv_id ‚Äò101‚Äô 
 c) DML - DELETE 

1. Delete the record of customer id ‚Äò10001‚Äô. 
 2. Delete all purchase details of items its quantity less than 2. 
 3. Delete the purchase details of product ‚Äòpen‚Äô in the in_id ‚Äò101‚Äô. 
 4. Delete details of customer who does not have phone number. 
 5. Delete all records from STUDENT table. 
 6. Delete Invoice details of a particular customer "XYZ".
 7. Delete the first two records of INVOICE_ITEM table its purchase quantity is high.


