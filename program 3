MySQL- TCL, DCL

TCL (Transaction Control Language)

ï‚´ TCL stands for Transaction Control Language
ï‚´ Used to manage transactions in database
ï‚´ Controls changes made by DML statements
ï‚´ Ensures data consistency
ï‚´ ðŸ“Œ Works mainly with:
ï‚´ INSERT
ï‚´ UPDATE
ï‚´ DELETE

What is a Transaction?

ï‚´ A Transaction is:
ï‚´ A group of SQL statements executed as a single unit.
ï‚´ Example:
ï‚´ Deduct money from Account A
ï‚´ Add money to Account B
ï‚´ Both must happen together.

TCL Commands in MySQL

ï‚´ Main TCL commands:
ï‚´ COMMIT
ï‚´ ROLLBACK
ï‚´ SAVEPOINT
ï‚´ SET AUTOCOMMIT

COMMIT

ï‚´ Saves all changes permanently
ï‚´ Makes changes visible to others
ï‚´ INSERT INTO student VALUES (101, 'Anu');
ï‚´ COMMIT;
ï‚´ âœ” Data permanently saved
âœ” Cannot undo after commit

EG:

ï‚´ SET AUTOCOMMIT = 0;

ï‚´ INSERT INTO product VALUES (201, 'Pen', 10);
ï‚´ COMMIT;

ROLLBACK

ï‚´ Undoes changes
ï‚´ Returns database to previous state
ï‚´ DELETE FROM student WHERE id = 101;
ï‚´ ROLLBACK;
ï‚´ âœ” Changes cancelled
âœ” Data restored

EG:

ï‚´ SET AUTOCOMMIT = 0;
ï‚´ SELECT * FROM product;
ï‚´ INSERT INTO product VALUES (201, 'Pen', 10);
ï‚´ SELECT * FROM product;
ï‚´ ROLLBACK;
ï‚´ SELECT * FROM product;

SAVEPOINT

ï‚´ Creates a temporary checkpoint
ï‚´ Allows partial rollback
ï‚´ SAVEPOINT sp1;
ï‚´ UPDATE student SET city='TVM' WHERE id=1;
ï‚´ ROLLBACK TO sp1;
ï‚´ âœ” Only changes after savepoint are undone

Eg:

ï‚´ SET AUTOCOMMIT = 0;
ï‚´ INSERT INTO product VALUES (301,'Pen',10);
ï‚´ INSERT INTO product VALUES (302,'Pencil',5);
ï‚´ SAVEPOINT sp1;
ï‚´ UPDATE product SET price = 15 WHERE pid = 301;
ï‚´ SAVEPOINT sp2;
ï‚´ INSERT INTO product VALUES (303,'Notebook',40);
ï‚´ SAVEPOINT sp3;
ï‚´ DELETE FROM product WHERE pid = 302;
ï‚´ ROLLBACK TO sp3;
ï‚´ ROLLBACK TO sp1;
ï‚´ COMMIT;

SET AUTOCOMMIT

ï‚´ By default:
ï‚´ AUTOCOMMIT = ON
ï‚´ Each statement automatically committed
ï‚´ To disable:
ï‚´ SET AUTOCOMMIT = 0;

DCL (Data Control Language)

ï‚´ DCL stands for Data Control Language
ï‚´ Used to control access permissions
ï‚´ Manages user rights
ï‚´ Main commands:
ï‚´ GRANT
ï‚´ REVOKE

GRANT Command

ï‚´ Gives permission to user
ï‚´ GRANT privilege
ï‚´ ON database.table
ï‚´ TO 'username'@â€˜localhost';
ï‚´ Types of Privileges:
ï‚´ SELECT
ï‚´ INSERT
ï‚´ UPDATE
ï‚´ DELETE
ï‚´ ALL PRIVILEGES

Create User and Grant Privilege

ï‚´ CREATE USER 'user2'@'localhost' IDENTIFIED BY 'pass123';
ï‚´ GRANT SELECT
ï‚´ ON college.student
ï‚´ TO 'user2'@'localhost';

Eg:

ï‚´ Grant INSERT Permission:
ï‚´ GRANT INSERT
ï‚´ ON college.student
ï‚´ TO 'user1'@'localhost';
ï‚´ Grant Multiple Permissions:
ï‚´ GRANT SELECT, INSERT, UPDATE
ï‚´ ON college.student
ï‚´ TO 'user1'@'localhost';

ï‚´ Grant All Privileges on Entire Database:
ï‚´ GRANT ALL PRIVILEGES
ï‚´ ON college.*
ï‚´ TO 'admin1'@'localhost';
ï‚´ Grant ALL privileges on one database:
ï‚´ GRANT ALL PRIVILEGES
ï‚´ ON college.*
ï‚´ TO 'user1'@'localhost';

Show Privileges

ï‚´ Show Privileges of Current User:
ï‚´ SHOW GRANTS;
ï‚´ Show Privileges of Specific User:
ï‚´ SHOW GRANTS FOR 'user1'@'localhost';

REVOKE Command

ï‚´ REVOKE is used to remove privileges from a user.
ï‚´ REVOKE SELECT ON college.student
ï‚´ FROM 'user1'@'localhost';
ï‚´ âœ” Removes only SELECT permission
âœ” User cannot view table data
ï‚´ Revoke Multiple Privileges:
ï‚´ REVOKE INSERT, UPDATE
ï‚´ ON college.student
ï‚´ FROM 'user1'@'localhost';

ï‚´ Revoke All Privileges on a Database:
ï‚´ REVOKE ALL PRIVILEGES
ï‚´ ON college.*
ï‚´ FROM 'user1'@'localhost';
ï‚´ Revoke GRANT OPTION
ï‚´ REVOKE GRANT OPTION
ï‚´ ON college.*
ï‚´ FROM 'admin1'@'localhost';

Check After Revoke

ï‚´ SHOW GRANTS FOR 'user1'@'localhost';






MySQL- RECORD PROGRAM3-TCL,DCL COMMANDS
RESMI S R
â€¢
Feb 23
100 points
3. TCL & DCL COMMANDS


a) TCL COMMANDS 
 1. Commit 
 2. Rollback 
 3. Savepoint
 b) DCL COMMAND 
 Create two users user1, user2 
 1. GRANT:   Give insert and select privilege to user 1 on customer table in the invoice database.
Give update and delete privilege to user 2 on all tables in the invoice database. 
 2. REVOKE:   Remove delete privilege of user 2.
